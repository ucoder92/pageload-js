/*
 Page load - jQuery library
 URL: https://github.com/ucoder92/pageload-js
 Version: 1.0.8
 */
var pageLoadConfig={selector:"a",excludeJS:[],excludeElement:['[page-load-exclude="1"]','[page-load-exclude="true"]'],beforeSend:null,onLoad:null,onSuccess:null,onError:null,onPopstate:null},pageLoadInit=function(e){null!=e.selector&&""!=e.selector&&(pageLoadConfig.selector=e.selector),null!=e.excludeJS&&e.excludeJS.length>0&&(pageLoadConfig.excludeJS=e.excludeJS),null!=e.excludeElement&&e.excludeElement.length>0&&(e.excludeElement.push('[page-load-exclude="1"]'),e.excludeElement.push('[page-load-exclude="true"]'),pageLoadConfig.excludeElement=e.excludeElement),null!=e.beforeSend&&"function"==typeof e.beforeSend&&(pageLoadConfig.beforeSend=e.beforeSend),null!=e.onLoad&&"function"==typeof e.onLoad&&(pageLoadConfig.onLoad=e.onLoad),null!=e.onSuccess&&"function"==typeof e.onSuccess&&(pageLoadConfig.onSuccess=e.onSuccess),null!=e.onError&&"function"==typeof e.onError&&(pageLoadConfig.onError=e.onError),null!=e.onPopstate&&"function"==typeof e.onPopstate&&(pageLoadConfig.onPopstate=e.onPopstate)};(function(e){e(document).ready(function(){var t=window.location.href,o="<!DOCTYPE html>\r\n"+e("html")[0].outerHTML;window.history.pushState({data:o,href:t},"",t),n()}),window.onpopstate=function(e){if(null!=e.state){var n=e.state.data,t=e.state.href;null!=n&&null!=t&&o(n,t,!1)}null!=pageLoadConfig.onPopstate&&null!==pageLoadConfig.onPopstate&&pageLoadConfig.onPopstate(e)};var n=function(){var n=document.location.origin;null!=pageLoadConfig.selector&&""!=pageLoadConfig.selector&&e(document).on("click",pageLoadConfig.selector,function(){var o=e(this).attr("href"),l=e(this).attr("page-load-disable"),a=!1;if(null!=l&&("true"==l||"1"==l||!0===l))return!0;if(null!=o&&"#"!=o&&""!=o){var r=o.charAt(0),i="";if("#"!=r){var u=document.createElement("a");u.href=o,i=u.href}if(null!=i&&""!=i){var d=new URL(i);null!=d&&null!=d.origin&&d.origin==n&&(a=!0)}}return a?(t(o),!1):void 0})},t=function(n,t){window.stop();var l={};null!=t&&(l=t),e.ajax({url:n,type:"GET",data:l,beforeSend:function(){e("html, body").animate({scrollTop:0},300),null!=pageLoadConfig.beforeSend&&null!==pageLoadConfig.beforeSend&&pageLoadConfig.beforeSend(n,l)},success:function(e){null!=e&&""!=e&&o(e,n,!0),null!=pageLoadConfig.onSuccess&&null!==pageLoadConfig.onSuccess&&pageLoadConfig.onSuccess(n,l)},error:function(e){null!=pageLoadConfig.onError&&null!==pageLoadConfig.onError&&pageLoadConfig.onError(n,l),o(e.responseText,n,!0)}})},o=function(n,t,o){var a=new DOMParser;if(null!=n&&""!=n)var r=a.parseFromString(n,"text/html"),i=e(r);if(null!=pageLoadConfig.onLoad&&null!==pageLoadConfig.onLoad){var u=pageLoadConfig.onLoad(i,t);null!=u&&u.length>0&&(i=u)}if(null!=o&&o&&window.history.pushState({data:n,href:t},"",t),null!=i&&i.length>0){var d=i.children("html"),c=d.children("head"),s=d.children("body"),f=[],h=[],p="",g=c.html(),m="";for(document=a.parseFromString(n,"text/html"),e("head").children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=t.attr("page-load-disable"),a=g.indexOf(o);if(null!=l&&("true"==l||"1"==l||!0===l)&&a>-1)n=!1;else if(t.is("script")){var r=t.attr("src");null!=r&&""!=r&&a>-1&&(n=!1)}else if(t.is("link")){var i=t.attr("href");null!=i&&""!=i&&a>-1&&(n=!1)}else a>-1&&(n=!1)}n?t.remove():f.push({html:o,element:t})}),c.children().each(function(){var n=e(this),t=n.prop("outerHTML"),o=f.findIndex(e=>e.html===t);if(o<0&&null!=m&&""!=m){var l=f.findIndex(e=>e.html===m);if(l>-1){var a=f[l];null!=a&&null!=a.element&&(e(t).insertAfter(a.element),f.push({html:t,element:a.element.next()}))}}m=t}),null!=pageLoadConfig.excludeElement&&pageLoadConfig.excludeElement.length>0&&e.each(pageLoadConfig.excludeElement,function(n,t){var o=e("body").children(t);null!=o&&o.length>0&&o.each(function(){var n=e(this).prop("outerHTML");h.push({tag:t,html:n,element:e(this)})})}),s.children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=[],a=t.prop("tagName").toLowerCase();if(t.is("script")){var r=t.attr("src"),i=t.attr("page-load-exclude-js");null==i||!0!==i&&"true"!=i&&"1"!=i?null!=r&&""!=r&&null!=pageLoadConfig.excludeJS&&pageLoadConfig.excludeJS.length>0&&e.each(pageLoadConfig.excludeJS,function(e,t){-1!==r.indexOf(t)&&(n=!1)}):n=!1}if(null!=h&&h.length>0){var u=h.findIndex(e=>e.tag===a);if(u>-1)o=h[u].html,h.splice(u,1);else{l=[];e.each(this.attributes,function(){if(this.specified){var n=this.name,t=this.value;switch(n){case"id":""!=t&&l.push("#"+t);break;case"class":if(""!=t){var o=t.split(" ");e.each(o,function(e,n){l.push("."+n)})}break;default:l.push("["+n+"]"),""!=t&&(l.push("["+n+'="'+t+'"]'),l.push("["+n+"='"+t+"']"))}}}),l.length>0&&e.each(l,function(e,n){var t=h.findIndex(e=>e.tag===n);t>-1&&(o=h[t].html,h.splice(t,1))})}}}n&&(p+=o)}),null!=h&&h.length>0&&e.each(h,function(e,n){var t=n.html;null!=t&&""!=t&&(p+=t)}),e("body").empty(),l(p,document.body);e("html")[0].attributes.length>0;)e("html")[0].removeAttributeNode(e("html")[0].attributes[0]);for(d[0].attributes.length>0&&e.each(d[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("html").attr(o,t):e("html").attr(o,"")}});e("body")[0].attributes.length>0;)e("body")[0].removeAttributeNode(e("body")[0].attributes[0]);s[0].attributes.length>0&&e.each(s[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("body").attr(o,t):e("body").attr(o,"")}})}else window.location.reload()},l=function(e,n,t=!0){t&&(n.innerHTML="");let o=document.createElement("div");o.innerHTML=e;let l=o.querySelectorAll("script"),a=o.childNodes;for(let e=0;e<a.length;e++)n.appendChild(a[e].cloneNode(!0));for(let e=0;e<l.length;e++){let n=document.createElement("script");n.type=l[e].type||"text/javascript",l[e].hasAttribute("src")&&(n.src=l[e].src),n.innerHTML=l[e].innerHTML,document.head.appendChild(n),document.head.removeChild(n)}return!0}})(jQuery);