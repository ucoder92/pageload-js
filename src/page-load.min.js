/*
 Page load - jQuery library
 URL: https://github.com/ucoder92/pageload-js
 Version: 1.2.0
 */
var _pageLoadConfigs={active:!0,selector:"a",formSelector:"form",excludeJS:[],excludeForm:[],excludeElement:['[page-load-exclude="1"]','[page-load-exclude="true"]'],beforeSend:null,onClick:null,onLoad:null,onSuccess:null,onError:null,onPopstate:null,scrollToTop:!0},pageLoadInit=function(e){null!=e.active&&!1===e.active&&(_pageLoadConfigs.active=!1),null!=e.selector&&""!=e.selector&&(_pageLoadConfigs.selector=e.selector),null!=e.scrollToTop&&(_pageLoadConfigs.scrollToTop=e.scrollToTop),null!=e.formSelector&&""!=e.formSelector&&(_pageLoadConfigs.formSelector=e.formSelector),null!=e.excludeForm&&e.excludeForm.length>0&&(_pageLoadConfigs.excludeForm=e.excludeForm),null!=e.excludeJS&&e.excludeJS.length>0&&(_pageLoadConfigs.excludeJS=e.excludeJS),null!=e.excludeElement&&e.excludeElement.length>0&&(e.excludeElement.push('[page-load-exclude="1"]'),e.excludeElement.push('[page-load-exclude="true"]'),_pageLoadConfigs.excludeElement=e.excludeElement),null!=e.beforeSend&&"function"==typeof e.beforeSend&&(_pageLoadConfigs.beforeSend=e.beforeSend),null!=e.onClick&&"function"==typeof e.onClick&&(_pageLoadConfigs.onClick=e.onClick),null!=e.onLoad&&"function"==typeof e.onLoad&&(_pageLoadConfigs.onLoad=e.onLoad),null!=e.onSuccess&&"function"==typeof e.onSuccess&&(_pageLoadConfigs.onSuccess=e.onSuccess),null!=e.onError&&"function"==typeof e.onError&&(_pageLoadConfigs.onError=e.onError),null!=e.onPopstate&&"function"==typeof e.onPopstate&&(_pageLoadConfigs.onPopstate=e.onPopstate)};(function(e){var n=null;e(document).ready(function(){if(u()){var n=window.location.href,t="<!DOCTYPE html>\r\n"+e("html")[0].outerHTML;window.history.pushState({data:t,href:n},"",n),o()}}),window.onpopstate=function(e){if(u()){if(null!=e.state){var n=e.state.data,o=e.state.href;null!=n&&""!=n&&null!=o&&""!=o&&l(n,o,!1)}null!=_pageLoadConfigs.onPopstate&&null!==_pageLoadConfigs.onPopstate&&_pageLoadConfigs.onPopstate(e)}};var o=function(){var n=window.location.host;null!=_pageLoadConfigs.selector&&""!=_pageLoadConfigs.selector&&e(document).on("click",_pageLoadConfigs.selector,function(){if(u()){var o=e(this).attr("href"),l=e(this).attr("page-load-disable"),a=e(this).attr("page-load-scroll-to-top"),r=e(this).attr("target");if(e(this).attr("page-load-click",!0),null!=_pageLoadConfigs.onClick&&null!==_pageLoadConfigs.onClick&&_pageLoadConfigs.onClick(e(this),o),null!=l&&("true"==l||"1"==l||!0===l))return!0;if(null==a||"false"!=a&&"0"!=l&&!1!==l||(_pageLoadConfigs.scrollToTop=!1),null!=r&&"_blank"==r.toLowerCase())return!0;if(null!=o&&"#"!=o&&""!=o){var s="",c=o.charAt(0);if("#"!=c){var d=document.createElement("a");d.href=o,s=d.href}if(null!=s&&""!=s){var f=!1,p=new URL(s);if(null!=p){var g=i(p.pathname),h=p.host.replace("www.",""),m=n.replace("www.","");null!=g&&""!=g?f=!1:h==m&&(f=!0)}if(f){var L=window.location.protocol+"//"+window.location.host+p.pathname+p.search;return t(L),!1}}}}}),null!=_pageLoadConfigs.formSelector&&""!=_pageLoadConfigs.formSelector&&e(document).on("submit",_pageLoadConfigs.formSelector,function(n){var o=!0,l=s(e(this));if(l.length>0&&_pageLoadConfigs.excludeForm.length>0&&e.each(l,function(e,n){var t=_pageLoadConfigs.excludeForm.findIndex(e=>e===n);t>-1&&(o=!1)}),u()&&o){n.preventDefault();var a=e(this),r=a.serializeArray(),i=a.attr("action"),c=a.attr("method"),d="GET",f=window.location.href;null!=i&&""!=i&&(f=i),null!=c&&""!=c&&(d=c),""!=i&&t(f,r,d)}})},t=function(o,t,r){var i,u;if(a(),null!=t&&(i=t),type=null!=r&&""!=r?r:"GET",null!=o&&""!=o){window.stop();var s=new URL(o),c=window.location.host;if("GET"==type&&null!=i&&null!==i){var d=s.host.replace("www.",""),f=c.replace("www.","");"string"==typeof i&&""!=i&&(i=new URLSearchParams(i)),e.isArray(i)?e.each(i,function(e,n){null!=n.value&&""!=n.value?s.searchParams.set(n.name,n.value):s.searchParams.delete(n.name)}):"object"==typeof i&&e.each(i,function(e,n){null!=n&&""!=n?s.searchParams.set(e,n):s.searchParams.delete(e)})}f==d&&(u=s.href)}null!=u&&""!=u&&(n=e.ajax({url:o,type:type,data:i,beforeSend:function(){_pageLoadConfigs.scrollToTop&&e("html, body").animate({scrollTop:0},300),null!=_pageLoadConfigs.beforeSend&&null!==_pageLoadConfigs.beforeSend&&_pageLoadConfigs.beforeSend(u,i)},success:function(e){null!=e&&""!=e&&l(e,u,!0),null!=_pageLoadConfigs.onSuccess&&null!==_pageLoadConfigs.onSuccess&&_pageLoadConfigs.onSuccess(u,i,e)},error:function(e,n){e.status>0&&l(e.responseText,u,!0),null!=_pageLoadConfigs.onError&&null!==_pageLoadConfigs.onError&&_pageLoadConfigs.onError(u,e,i)}}))},l=function(n,t,l){var a=new DOMParser;if(null!=n&&""!=n)var i=a.parseFromString(n,"text/html"),c=e(i);if(null!=_pageLoadConfigs.onLoad&&null!==_pageLoadConfigs.onLoad){var d=_pageLoadConfigs.onLoad(c,t);null!=d&&d.length>0&&(c=d)}if(null!=l&&l&&window.history.pushState({data:n,href:t},"",t),null!=c&&c.length>0){var f=c.children("html"),p=f.children("head"),g=f.children("body"),h=[],m=[],L="",v=p.html(),C="";if(e(document).off(),e(document.body).off(),o(),document=a.parseFromString(n,"text/html"),e("head").children().each(function(){var n=!0,o=e(this),t=o.prop("outerHTML");if(null!=t&&""!=t){var l=o.attr("page-load-disable"),a=v.indexOf(t);if(null!=l&&("true"==l||"1"==l||!0===l)&&a>-1)n=!1;else if(o.is("script")){var r=o.attr("src");null!=r&&""!=r&&a>-1&&(n=!1)}else if(o.is("link")){var i=o.attr("href");null!=i&&""!=i&&a>-1&&(n=!1)}else a>-1&&(n=!1)}n?o.remove():h.push({html:t,element:o})}),p.children().each(function(){var n=e(this),o=n.prop("outerHTML"),t=h.findIndex(e=>e.html===o);if(t<0&&null!=C&&""!=C){var l=h.findIndex(e=>e.html===C);if(l>-1){var a=h[l];null!=a&&null!=a.element&&(e(o).insertAfter(a.element),h.push({html:o,element:a.element.next()}))}}C=o}),null!=_pageLoadConfigs.excludeElement&&_pageLoadConfigs.excludeElement.length>0&&e.each(_pageLoadConfigs.excludeElement,function(n,o){var t=e("body").children(o);null!=t&&t.length>0&&t.each(function(){var n=e(this).prop("outerHTML");m.push({tag:o,html:n,element:e(this)})})}),g.children().each(function(){var n=!0,o=e(this),t=o.prop("outerHTML");if(null!=t&&""!=t){var l=[],a=o.prop("tagName").toLowerCase();if(o.is("script")){var r=o.attr("src"),i=o.attr("page-load-exclude-js");null==i||!0!==i&&"true"!=i&&"1"!=i?null!=r&&""!=r&&null!=_pageLoadConfigs.excludeJS&&_pageLoadConfigs.excludeJS.length>0&&e.each(_pageLoadConfigs.excludeJS,function(e,o){-1!==r.indexOf(o)&&(n=!1)}):n=!1}if(null!=m&&m.length>0){var u=m.findIndex(e=>e.tag===a);if(u>-1)t=m[u].html,m.splice(u,1);else{l=s(o);l.length>0&&e.each(l,function(e,n){var o=m.findIndex(e=>e.tag===n);o>-1&&(t=m[o].html,m.splice(o,1))})}}}n&&(L+=t)}),null!=m&&m.length>0&&e.each(m,function(e,n){var o=n.html;null!=o&&""!=o&&(L+=o)}),e("body").empty(),u()){for(r(L,document.body);e("html")[0].attributes.length>0;)e("html")[0].removeAttributeNode(e("html")[0].attributes[0]);for(f[0].attributes.length>0&&e.each(f[0].attributes,function(n,o){if(this.specified&&null!=this.name){var t=this.name;o=this.value;null!=o?e("html").attr(t,o):e("html").attr(t,"")}});e("body")[0].attributes.length>0;)e("body")[0].removeAttributeNode(e("body")[0].attributes[0]);g[0].attributes.length>0&&e.each(g[0].attributes,function(n,o){if(this.specified&&null!=this.name){var t=this.name;o=this.value;null!=o?e("body").attr(t,o):e("body").attr(t,"")}})}else e("body").css({opacity:0,display:"none",overflow:"hidden"}),window.location.reload()}else window.location.reload()},a=function(){null!=n&&null!==n&&n.abort()},r=function(e,n,o=!0){o&&(n.innerHTML="");let t=document.createElement("div");t.innerHTML=e;let l=t.querySelectorAll("script"),a=t.childNodes;for(let e=0;e<a.length;e++)n.appendChild(a[e].cloneNode(!0));for(let e=0;e<l.length;e++){let n=document.createElement("script");n.type=l[e].type||"text/javascript",l[e].hasAttribute("src")&&(n.src=l[e].src),n.innerHTML=l[e].innerHTML,document.head.appendChild(n),document.head.removeChild(n)}return!0},i=function(e){var n=e.indexOf(".",e.lastIndexOf("/")+1);if(-1==n)return!1;var o=e.substr(n+1),t=o.search(/$|[?#]/);return o.substring(0,t)},u=function(){return!1!==_pageLoadConfigs.active&&("undefined"==typeof deactivatePageLoad||!0!==deactivatePageLoad)};e.fn.getAllAttrs=function(n){var o={};return e.each(this[0].attributes,function(){"value"!=this.name&&this.specified&&(o[this.name]=this.value)}),o};var s=function(n){var o=[],t=n.getAllAttrs();return e.each(t,function(n,t){switch(n){case"id":""!=t&&o.push("#"+t);break;case"class":if(""!=t){var l=t.split(" ");e.each(l,function(e,n){o.push("."+n)})}break;default:o.push("["+n+"]"),""!=t&&(o.push("["+n+'="'+t+'"]'),o.push("["+n+"='"+t+"']"))}}),o}})(jQuery);