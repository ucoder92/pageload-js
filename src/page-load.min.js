/*
 Page load - jQuery library
 URL: https://github.com/ucoder92/pageload-js
 Version: 1.1.9
 */
var _pageLoadConfigs={active:!0,selector:"a",formSelector:"form",excludeJS:[],excludeElement:['[page-load-exclude="1"]','[page-load-exclude="true"]'],beforeSend:null,onClick:null,onLoad:null,onSuccess:null,onError:null,onPopstate:null},pageLoadInit=function(e){null!=e.active&&!1===e.active&&(_pageLoadConfigs.active=!1),null!=e.selector&&""!=e.selector&&(_pageLoadConfigs.selector=e.selector),null!=e.formSelector&&""!=e.formSelector&&(_pageLoadConfigs.formSelector=e.formSelector),null!=e.excludeJS&&e.excludeJS.length>0&&(_pageLoadConfigs.excludeJS=e.excludeJS),null!=e.excludeElement&&e.excludeElement.length>0&&(e.excludeElement.push('[page-load-exclude="1"]'),e.excludeElement.push('[page-load-exclude="true"]'),_pageLoadConfigs.excludeElement=e.excludeElement),null!=e.beforeSend&&"function"==typeof e.beforeSend&&(_pageLoadConfigs.beforeSend=e.beforeSend),null!=e.onClick&&"function"==typeof e.onClick&&(_pageLoadConfigs.onClick=e.onClick),null!=e.onLoad&&"function"==typeof e.onLoad&&(_pageLoadConfigs.onLoad=e.onLoad),null!=e.onSuccess&&"function"==typeof e.onSuccess&&(_pageLoadConfigs.onSuccess=e.onSuccess),null!=e.onError&&"function"==typeof e.onError&&(_pageLoadConfigs.onError=e.onError),null!=e.onPopstate&&"function"==typeof e.onPopstate&&(_pageLoadConfigs.onPopstate=e.onPopstate)};(function(e){e(document).ready(function(){if(r()){var t=window.location.href,o="<!DOCTYPE html>\r\n"+e("html")[0].outerHTML;window.history.pushState({data:o,href:t},"",t),n()}}),window.onpopstate=function(e){if(r()){if(null!=e.state){var n=e.state.data,t=e.state.href;null!=n&&""!=n&&null!=t&&""!=t&&o(n,t,!1)}null!=_pageLoadConfigs.onPopstate&&null!==_pageLoadConfigs.onPopstate&&_pageLoadConfigs.onPopstate(e)}};var n=function(){var n=window.location.host;null!=_pageLoadConfigs.selector&&""!=_pageLoadConfigs.selector&&e(document).on("click",_pageLoadConfigs.selector,function(){if(r()){var o=e(this).attr("href"),l=e(this).attr("page-load-disable"),i=e(this).attr("target");if(e(this).attr("page-load-click",!0),null!=_pageLoadConfigs.onClick&&null!==_pageLoadConfigs.onClick&&_pageLoadConfigs.onClick(e(this),o),null!=l&&("true"==l||"1"==l||!0===l))return!0;if(null!=i&&"_blank"==i.toLowerCase())return!0;if(null!=o&&"#"!=o&&""!=o){var u="",s=o.charAt(0);if("#"!=s){var c=document.createElement("a");c.href=o,u=c.href}if(null!=u&&""!=u){var d=!1,f=new URL(u);if(null!=f){var h=a(f.pathname),p=f.host.replace("www.",""),g=n.replace("www.","");null!=h&&""!=h?d=!1:p==g&&(d=!0)}if(d){var m=window.location.protocol+"//"+window.location.host+f.pathname+f.search;return t(m),!1}}}}}),null!=_pageLoadConfigs.formSelector&&""!=_pageLoadConfigs.formSelector&&e(document).on("submit",_pageLoadConfigs.formSelector,function(n){if(r()){n.preventDefault();var o=e(this),l=o.serializeArray(),a=o.attr("action"),i=o.attr("method"),u="GET",s=window.location.href;null!=a&&""!=a&&(s=a),null!=i&&""!=i&&(u=i),""!=a&&t(s,l,u)}})},t=function(n,t,l){var a,r;if(null!=t&&(a=t),type=null!=l&&""!=l?l:"GET",null!=n&&""!=n){window.stop();var i=new URL(n),u=window.location.host;if("GET"==type&&null!=a&&null!==a){var s=i.host.replace("www.",""),c=u.replace("www.","");"string"==typeof a&&""!=a&&(a=new URLSearchParams(a)),e.isArray(a)?e.each(a,function(e,n){null!=n.value&&""!=n.value?i.searchParams.set(n.name,n.value):i.searchParams.delete(n.name)}):"object"==typeof a&&e.each(a,function(e,n){null!=n&&""!=n?i.searchParams.set(e,n):i.searchParams.delete(e)})}c==s&&(r=i.href)}null!=r&&""!=r&&e.ajax({url:n,type:type,data:a,beforeSend:function(){e("html, body").animate({scrollTop:0},300),null!=_pageLoadConfigs.beforeSend&&null!==_pageLoadConfigs.beforeSend&&_pageLoadConfigs.beforeSend(r,a)},success:function(e){null!=e&&""!=e&&o(e,r,!0),null!=_pageLoadConfigs.onSuccess&&null!==_pageLoadConfigs.onSuccess&&_pageLoadConfigs.onSuccess(r,a,e)},error:function(e){o(e.responseText,r,!0),null!=_pageLoadConfigs.onError&&null!==_pageLoadConfigs.onError&&_pageLoadConfigs.onError(r,e,a)}})},o=function(t,o,a){var i=new DOMParser;if(null!=t&&""!=t)var u=i.parseFromString(t,"text/html"),s=e(u);if(null!=_pageLoadConfigs.onLoad&&null!==_pageLoadConfigs.onLoad){var c=_pageLoadConfigs.onLoad(s,o);null!=c&&c.length>0&&(s=c)}if(null!=a&&a&&window.history.pushState({data:t,href:o},"",o),null!=s&&s.length>0){var d=s.children("html"),f=d.children("head"),h=d.children("body"),p=[],g=[],m="",L=f.html(),v="";if(e(document).off(),e(document.body).off(),n(),document=i.parseFromString(t,"text/html"),e("head").children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=t.attr("page-load-disable"),a=L.indexOf(o);if(null!=l&&("true"==l||"1"==l||!0===l)&&a>-1)n=!1;else if(t.is("script")){var r=t.attr("src");null!=r&&""!=r&&a>-1&&(n=!1)}else if(t.is("link")){var i=t.attr("href");null!=i&&""!=i&&a>-1&&(n=!1)}else a>-1&&(n=!1)}n?t.remove():p.push({html:o,element:t})}),f.children().each(function(){var n=e(this),t=n.prop("outerHTML"),o=p.findIndex(e=>e.html===t);if(o<0&&null!=v&&""!=v){var l=p.findIndex(e=>e.html===v);if(l>-1){var a=p[l];null!=a&&null!=a.element&&(e(t).insertAfter(a.element),p.push({html:t,element:a.element.next()}))}}v=t}),null!=_pageLoadConfigs.excludeElement&&_pageLoadConfigs.excludeElement.length>0&&e.each(_pageLoadConfigs.excludeElement,function(n,t){var o=e("body").children(t);null!=o&&o.length>0&&o.each(function(){var n=e(this).prop("outerHTML");g.push({tag:t,html:n,element:e(this)})})}),h.children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=[],a=t.prop("tagName").toLowerCase();if(t.is("script")){var r=t.attr("src"),i=t.attr("page-load-exclude-js");null==i||!0!==i&&"true"!=i&&"1"!=i?null!=r&&""!=r&&null!=_pageLoadConfigs.excludeJS&&_pageLoadConfigs.excludeJS.length>0&&e.each(_pageLoadConfigs.excludeJS,function(e,t){-1!==r.indexOf(t)&&(n=!1)}):n=!1}if(null!=g&&g.length>0){var u=g.findIndex(e=>e.tag===a);if(u>-1)o=g[u].html,g.splice(u,1);else{l=[];e.each(this.attributes,function(){if(this.specified){var n=this.name,t=this.value;switch(n){case"id":""!=t&&l.push("#"+t);break;case"class":if(""!=t){var o=t.split(" ");e.each(o,function(e,n){l.push("."+n)})}break;default:l.push("["+n+"]"),""!=t&&(l.push("["+n+'="'+t+'"]'),l.push("["+n+"='"+t+"']"))}}}),l.length>0&&e.each(l,function(e,n){var t=g.findIndex(e=>e.tag===n);t>-1&&(o=g[t].html,g.splice(t,1))})}}}n&&(m+=o)}),null!=g&&g.length>0&&e.each(g,function(e,n){var t=n.html;null!=t&&""!=t&&(m+=t)}),e("body").empty(),r()){for(l(m,document.body);e("html")[0].attributes.length>0;)e("html")[0].removeAttributeNode(e("html")[0].attributes[0]);for(d[0].attributes.length>0&&e.each(d[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("html").attr(o,t):e("html").attr(o,"")}});e("body")[0].attributes.length>0;)e("body")[0].removeAttributeNode(e("body")[0].attributes[0]);h[0].attributes.length>0&&e.each(h[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("body").attr(o,t):e("body").attr(o,"")}})}else e("body").css({opacity:0,display:"none",overflow:"hidden"}),window.location.reload()}else window.location.reload()},l=function(e,n,t=!0){t&&(n.innerHTML="");let o=document.createElement("div");o.innerHTML=e;let l=o.querySelectorAll("script"),a=o.childNodes;for(let e=0;e<a.length;e++)n.appendChild(a[e].cloneNode(!0));for(let e=0;e<l.length;e++){let n=document.createElement("script");n.type=l[e].type||"text/javascript",l[e].hasAttribute("src")&&(n.src=l[e].src),n.innerHTML=l[e].innerHTML,document.head.appendChild(n),document.head.removeChild(n)}return!0},a=function(e){var n=e.indexOf(".",e.lastIndexOf("/")+1);if(-1==n)return!1;var t=e.substr(n+1),o=t.search(/$|[?#]/);return t.substring(0,o)},r=function(){return!1!==_pageLoadConfigs.active&&("undefined"==typeof deactivatePageLoad||!0!==deactivatePageLoad)}})(jQuery);