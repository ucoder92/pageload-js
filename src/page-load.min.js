/*
 Page load - jQuery library
 URL: https://github.com/ucoder92/pageload-js
 Version: 1.1.7
 */
var _pageLoadConfigs={selector:"a",formSelector:"form",excludeJS:[],excludeElement:['[page-load-exclude="1"]','[page-load-exclude="true"]'],beforeSend:null,onClick:null,onLoad:null,onSuccess:null,onError:null,onPopstate:null},pageLoadInit=function(e){null!=e.selector&&""!=e.selector&&(_pageLoadConfigs.selector=e.selector),null!=e.formSelector&&""!=e.formSelector&&(_pageLoadConfigs.formSelector=e.formSelector),null!=e.excludeJS&&e.excludeJS.length>0&&(_pageLoadConfigs.excludeJS=e.excludeJS),null!=e.excludeElement&&e.excludeElement.length>0&&(e.excludeElement.push('[page-load-exclude="1"]'),e.excludeElement.push('[page-load-exclude="true"]'),_pageLoadConfigs.excludeElement=e.excludeElement),null!=e.beforeSend&&"function"==typeof e.beforeSend&&(_pageLoadConfigs.beforeSend=e.beforeSend),null!=e.onClick&&"function"==typeof e.onClick&&(_pageLoadConfigs.onClick=e.onClick),null!=e.onLoad&&"function"==typeof e.onLoad&&(_pageLoadConfigs.onLoad=e.onLoad),null!=e.onSuccess&&"function"==typeof e.onSuccess&&(_pageLoadConfigs.onSuccess=e.onSuccess),null!=e.onError&&"function"==typeof e.onError&&(_pageLoadConfigs.onError=e.onError),null!=e.onPopstate&&"function"==typeof e.onPopstate&&(_pageLoadConfigs.onPopstate=e.onPopstate)};(function(e){e(document).ready(function(){var t=window.location.href,o="<!DOCTYPE html>\r\n"+e("html")[0].outerHTML;window.history.pushState({data:o,href:t},"",t),n()}),window.onpopstate=function(e){if(null!=e.state){var n=e.state.data,t=e.state.href;null!=n&&""!=n&&null!=t&&""!=t&&o(n,t,!1)}null!=_pageLoadConfigs.onPopstate&&null!==_pageLoadConfigs.onPopstate&&_pageLoadConfigs.onPopstate(e)};var n=function(){var n=window.location.host;null!=_pageLoadConfigs.selector&&""!=_pageLoadConfigs.selector&&e(document).on("click",_pageLoadConfigs.selector,function(){var o=e(this).attr("href"),l=e(this).attr("page-load-disable"),r=e(this).attr("target");if(e(this).attr("page-load-click",!0),null!=_pageLoadConfigs.onClick&&null!==_pageLoadConfigs.onClick&&_pageLoadConfigs.onClick(e(this),o),null!=l&&("true"==l||"1"==l||!0===l))return!0;if(null!=r&&"_blank"==r.toLowerCase())return!0;if(null!=o&&"#"!=o&&""!=o){var i="",u=o.charAt(0);if("#"!=u){var s=document.createElement("a");s.href=o,i=s.href}if(null!=i&&""!=i){var c=!1,d=new URL(i);if(null!=d){var f=a(d.pathname),h=d.host.replace("www.",""),p=n.replace("www.","");null!=f&&""!=f?c=!1:h==p&&(c=!0)}if(c){var g=window.location.protocol+"//"+window.location.host+d.pathname+d.search;return t(g),!1}}}}),null!=_pageLoadConfigs.formSelector&&""!=_pageLoadConfigs.formSelector&&e(document).on("submit",_pageLoadConfigs.formSelector,function(n){n.preventDefault();var o=e(this),l=o.serializeArray(),a=o.attr("action"),r=o.attr("method"),i="GET",u=window.location.href;null!=a&&""!=a&&(u=a),null!=r&&""!=r&&(i=r),""!=a&&t(u,l,i)})},t=function(n,t,l){var a,r;if(null!=t&&(a=t),type=null!=l&&""!=l?l:"GET",null!=n&&""!=n){window.stop();var i=new URL(n),u=window.location.host;if("GET"==type&&null!=a&&null!==a){var s=i.host.replace("www.",""),c=u.replace("www.","");"string"==typeof a&&""!=a&&(a=new URLSearchParams(a)),e.isArray(a)?e.each(a,function(e,n){null!=n.value&&""!=n.value?i.searchParams.set(n.name,n.value):i.searchParams.delete(n.name)}):"object"==typeof a&&e.each(a,function(e,n){null!=n&&""!=n?i.searchParams.set(e,n):i.searchParams.delete(e)})}c==s&&(r=i.href)}null!=r&&""!=r&&e.ajax({url:n,type:type,data:a,beforeSend:function(){e("html, body").animate({scrollTop:0},300),null!=_pageLoadConfigs.beforeSend&&null!==_pageLoadConfigs.beforeSend&&_pageLoadConfigs.beforeSend(r,a)},success:function(e){null!=e&&""!=e&&o(e,r,!0),null!=_pageLoadConfigs.onSuccess&&null!==_pageLoadConfigs.onSuccess&&_pageLoadConfigs.onSuccess(r,a,e)},error:function(e){o(e.responseText,r,!0),null!=_pageLoadConfigs.onError&&null!==_pageLoadConfigs.onError&&_pageLoadConfigs.onError(r,e,a)}})},o=function(t,o,a){var r=new DOMParser;if(null!=t&&""!=t)var i=r.parseFromString(t,"text/html"),u=e(i);if(null!=_pageLoadConfigs.onLoad&&null!==_pageLoadConfigs.onLoad){var s=_pageLoadConfigs.onLoad(u,o);null!=s&&s.length>0&&(u=s)}if(null!=a&&a&&window.history.pushState({data:t,href:o},"",o),null!=u&&u.length>0){var c=u.children("html"),d=c.children("head"),f=c.children("body"),h=[],p=[],g="",m=d.html(),L="";for(e(document).off(),e(document.body).off(),n(),document=r.parseFromString(t,"text/html"),e("head").children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=t.attr("page-load-disable"),a=m.indexOf(o);if(null!=l&&("true"==l||"1"==l||!0===l)&&a>-1)n=!1;else if(t.is("script")){var r=t.attr("src");null!=r&&""!=r&&a>-1&&(n=!1)}else if(t.is("link")){var i=t.attr("href");null!=i&&""!=i&&a>-1&&(n=!1)}else a>-1&&(n=!1)}n?t.remove():h.push({html:o,element:t})}),d.children().each(function(){var n=e(this),t=n.prop("outerHTML"),o=h.findIndex(e=>e.html===t);if(o<0&&null!=L&&""!=L){var l=h.findIndex(e=>e.html===L);if(l>-1){var a=h[l];null!=a&&null!=a.element&&(e(t).insertAfter(a.element),h.push({html:t,element:a.element.next()}))}}L=t}),null!=_pageLoadConfigs.excludeElement&&_pageLoadConfigs.excludeElement.length>0&&e.each(_pageLoadConfigs.excludeElement,function(n,t){var o=e("body").children(t);null!=o&&o.length>0&&o.each(function(){var n=e(this).prop("outerHTML");p.push({tag:t,html:n,element:e(this)})})}),f.children().each(function(){var n=!0,t=e(this),o=t.prop("outerHTML");if(null!=o&&""!=o){var l=[],a=t.prop("tagName").toLowerCase();if(t.is("script")){var r=t.attr("src"),i=t.attr("page-load-exclude-js");null==i||!0!==i&&"true"!=i&&"1"!=i?null!=r&&""!=r&&null!=_pageLoadConfigs.excludeJS&&_pageLoadConfigs.excludeJS.length>0&&e.each(_pageLoadConfigs.excludeJS,function(e,t){-1!==r.indexOf(t)&&(n=!1)}):n=!1}if(null!=p&&p.length>0){var u=p.findIndex(e=>e.tag===a);if(u>-1)o=p[u].html,p.splice(u,1);else{l=[];e.each(this.attributes,function(){if(this.specified){var n=this.name,t=this.value;switch(n){case"id":""!=t&&l.push("#"+t);break;case"class":if(""!=t){var o=t.split(" ");e.each(o,function(e,n){l.push("."+n)})}break;default:l.push("["+n+"]"),""!=t&&(l.push("["+n+'="'+t+'"]'),l.push("["+n+"='"+t+"']"))}}}),l.length>0&&e.each(l,function(e,n){var t=p.findIndex(e=>e.tag===n);t>-1&&(o=p[t].html,p.splice(t,1))})}}}n&&(g+=o)}),null!=p&&p.length>0&&e.each(p,function(e,n){var t=n.html;null!=t&&""!=t&&(g+=t)}),e("body").empty(),l(g,document.body);e("html")[0].attributes.length>0;)e("html")[0].removeAttributeNode(e("html")[0].attributes[0]);for(c[0].attributes.length>0&&e.each(c[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("html").attr(o,t):e("html").attr(o,"")}});e("body")[0].attributes.length>0;)e("body")[0].removeAttributeNode(e("body")[0].attributes[0]);f[0].attributes.length>0&&e.each(f[0].attributes,function(n,t){if(this.specified&&null!=this.name){var o=this.name;t=this.value;null!=t?e("body").attr(o,t):e("body").attr(o,"")}})}else window.location.reload()},l=function(e,n,t=!0){t&&(n.innerHTML="");let o=document.createElement("div");o.innerHTML=e;let l=o.querySelectorAll("script"),a=o.childNodes;for(let e=0;e<a.length;e++)n.appendChild(a[e].cloneNode(!0));for(let e=0;e<l.length;e++){let n=document.createElement("script");n.type=l[e].type||"text/javascript",l[e].hasAttribute("src")&&(n.src=l[e].src),n.innerHTML=l[e].innerHTML,document.head.appendChild(n),document.head.removeChild(n)}return!0},a=function(e){var n=e.indexOf(".",e.lastIndexOf("/")+1);if(-1==n)return!1;var t=e.substr(n+1),o=t.search(/$|[?#]/);return t.substring(0,o)}})(jQuery);